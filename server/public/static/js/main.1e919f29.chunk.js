(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(e,a,t){e.exports=t(91)},57:function(e,a,t){},59:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},84:function(e,a,t){},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(43),o=t.n(r),l=t(4),i=t(15),m=t(18),s=(t(57),t(44)),u=t.n(s),d=function(){return"Fetching data..."},p=function(){return"Sorry. There is not data available right now. Please try later"},b=(t(59),t(12)),h=t(22),E=t(19);function g(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    approveBook(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return g=function(){return e},e}function f(){var e=Object(h.a)(["\n    query($id:ID){\n        book(id:$id){\n            id\n            name\n            comment\n            author\n            recommendedBy\n            published\n            tags {\n                name\n                id\n            }\n        }\n    }\n"]);return f=function(){return e},e}function v(){var e=Object(h.a)(["\nmutation(\n    $name:String!, \n    $comment:String!, \n    $author: String!, \n    $recommendedBy: String!,\n    $moderated: Boolean!,\n    $published: Boolean!,\n    $width: String!,\n    $height: String!,\n    $tags: [ID!]!\n    ){\n    addBook(\n        name:$name, \n        comment:$comment, \n        author:$author, \n        recommendedBy:$recommendedBy,\n        moderated: $moderated,\n        published: $published,\n        width: $width,\n        height: $height,\n        tags: $tags\n    ){\n        id\n        name\n        comment\n        author\n        recommendedBy\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return v=function(){return e},e}function k(){var e=Object(h.a)(["\n{\n    tags{\n        name\n        id\n    }\n}\n"]);return k=function(){return e},e}function N(){var e=Object(h.a)(["\n{\n    books {\n        name\n        id\n        author\n        width\n        height\n        createdAt\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return N=function(){return e},e}var y=Object(E.b)(N()),j=Object(E.b)(k()),O=Object(E.b)(v()),x=Object(E.b)(f()),B=Object(E.b)(g()),q=function(e){var a=e.name,t=e.width,n=e.author,r=e.height,o=e.id,i=e.getSelected,m=(e.pickedBook,e.tags),s=e.selectedTags,u=e.queryTag,d=a.length>25||n.length>25?.6:.8,p=t.replace("em","")*d+"em";return c.a.createElement("li",{onClick:i,className:function(e){var a=e.map((function(e){return e.id})),t=Object.values(s);return t.push(u),!!t.map((function(e){return a.includes(e)})).includes(!0)}(m)?"selected-by-tag":""},c.a.createElement(l.b,{to:"/libro/".concat(o)},c.a.createElement("div",{className:"vertical-text",style:{width:t,height:r,fontSize:p}},c.a.createElement("span",{className:"book-title"},a),c.a.createElement("span",{className:"book-author"},n))))},$=function(e){var a=e.selectedTags,t=e.queryTag,r=e.pathname,o=Object(n.useState)(null),l=Object(i.a)(o,2),m=l[0],s=l[1],u=Object(b.b)(y),h=u.loading,E=u.error,g=u.data,f=g&&g.books;return E?c.a.createElement(p,null):h?c.a.createElement(d,null):f&&c.a.createElement("ul",{className:"book-list ".concat((a.length||t)&&r.includes("/buscar-libro")?"search-mode":"")},f.sort((function(e,a){return a.createdAt.localeCompare(e.createdAt)})).map((function(e){return c.a.createElement(q,Object.assign({},e,{key:e.id,pickedBook:m,getSelected:function(){return s(e.id)},selectedTags:a,queryTag:t}))})))},w=t(21),S=(t(66),t(67),function(e){var a=e.tags,t=e.handleTagSelection,r=e.queryTag,o=Object(n.useState)(a),l=Object(i.a)(o,2),m=l[0],s=l[1];Object(n.useEffect)((function(){s(a)}));return m&&c.a.createElement("div",{className:"tags-group"},m.map((function(e,n){return c.a.createElement("a",{key:e.id},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(n),onClick:function(e){return function(e){a.forEach((function(a){a.name===e.target.value&&(a.isChecked=e.target.checked)}));var n=a.filter((function(e){return!0===e.isChecked}));return s(n),t&&t(n.map((function(e){return e.id})))}(e)}}),c.a.createElement("label",{htmlFor:"tag-".concat(n),className:"tag ".concat(e.isChecked||r===e.id?"is-checked":"")},e.name))})))}),T=t(51),C=t.n(T),I=function(e){var a=e.history,t=Object(b.a)(O),r=Object(i.a)(t,1)[0],o=Object(b.b)(j).data,m=Object(n.useState)({name:"",author:"",comment:"",recommendedBy:"",tags:[]}),s=Object(i.a)(m,2),u=s[0],d=s[1];Object(n.useEffect)((function(){if(o&&o.tags){var e=function(e){for(var a,t,n=e.length;n;a=parseInt(Math.random()*n),t=e[--n],e[n]=e[a],e[a]=t);return e}(o.tags).slice(0,6).map((function(e){return Object(w.a)({},e,{isChecked:!1})}));d(Object(w.a)({},u,{tags:e}))}}),[o]);var p=function(e){return console.log(e),C.a.post("".concat("https://books-x-people.herokuapp.com/api","/send-mail"),e)};return c.a.createElement("div",{className:"add-book page"},c.a.createElement("form",{id:"add-book",className:"content",onSubmit:function(e){return function(e){e.preventDefault();var t={width:Math.floor(2*Math.random())+1.75+"em",height:Math.floor(15*Math.random())+80+"%"},n=u.tags.filter((function(e){return 1==e.isChecked})).map((function(e){return e.id}));r({variables:{author:u.author,name:u.name,comment:u.comment,recommendedBy:u.recommendedBy,moderated:!1,published:!1,width:t.width,height:t.height,tags:n},refetchQueries:[{query:y}]}).then((function(e){p(e.data.addBook);var t=e.data.addBook.id;a.push("/gracias/".concat(t))}))}(e)}},c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Tu nombre:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(w.a)({},u,{recommendedBy:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"T\xedtulo del libro:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(w.a)({},u,{name:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Autor:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(w.a)({},u,{author:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Este es un libro perfecto para..."),c.a.createElement(S,{tags:u.tags})),c.a.createElement("input",{type:"text",className:"create-tag",placeholder:"A\xf1ade tu propia etiqueta"})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"\xbfPor qu\xe9 lo recomiendas?"),c.a.createElement("textarea",{rows:"5",onChange:function(e){return d(Object(w.a)({},u,{comment:e.target.value}))}})),c.a.createElement("div",{className:"buttons"},c.a.createElement(l.b,{to:"/",className:"btn-line-black"},"Cancelar"),c.a.createElement("button",{className:"btn-black"},"A\xf1adir libro"))))},A=(t(84),function(){return c.a.createElement("div",{className:"intro"},c.a.createElement("h1",{className:"title t1"},"Books x People"),c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Cuando leemos,  escuchamos nuestros pensamientos en palabras de otros. Nos inspiramos, nos sentimos acompa\xf1ados y hacemos viajes de interior."),c.a.createElement("p",null,"En estos tiempos dif\xedciles un libro puede ser un gran aliado. Deja aqu\xed tu lectura recomendada."),c.a.createElement("p",null,"Recomienda un libro para estos d\xedas en casa. ",c.a.createElement("span",{className:"b"},"#YoMeQuedoEnCasa"))),c.a.createElement("div",{className:"cta"},c.a.createElement(l.b,{to:"/recomendar-libro",className:"btn"},"A\xf1adir un libro a la estanter\xeda"),c.a.createElement(l.b,{to:"/buscar-libro",className:"btn-line"},"Buscar libro")))}),P=(t(85),function(){return c.a.createElement("header",null,c.a.createElement(l.b,{to:"/"},c.a.createElement("div",{className:"desktop"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/book-icon.svg"),alt:"Book icon"}),c.a.createElement("p",{className:"title t3 vertical-text"},"Books x People"),c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/people-icon.svg"),alt:"People icon"})),c.a.createElement("div",{className:"mobile"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/acronym.svg"),alt:"People icon"}),c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/pictogram.svg"),alt:"People icon"}))))}),D=(t(86),t(87),function(){return c.a.createElement("div",{className:"social-sharing"},c.a.createElement("p",null,"Compartir:"),c.a.createElement("ul",{className:"social-icons horizontal-list"},c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/whatsapp-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/twitter-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/linkedin-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/instagram-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/mail-icon.svg")})))))}),M=function(){return c.a.createElement("div",{className:"thank-you container page"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"title t3"},"Gracias por tu contribuci\xf3n"),c.a.createElement("p",null,"En Books X People queremos que compartir sea un acto de generosidad, respeto, empat\xeda y comunicaci\xf3n."),c.a.createElement("p",null,"Tenemos que moderar tu participaci\xf3n para asegurarnos de que cumple las normas de la comunidad."),c.a.createElement("p",null,"Seguro que tu libro est\xe1 pronto en nuestras estanter\xedas."),c.a.createElement(D,null),c.a.createElement("div",{className:"go-back"},c.a.createElement(l.b,{to:"/",className:"btn-line"},"Volver"))))},F=(t(88),function(e){var a=e.match,t=Object(b.b)(x,{variables:{id:a.params.bookId}}),n=t.loading,r=t.error,o=t.data,i=o&&o.book;return c.a.createElement("div",{className:"book-details page"},r?c.a.createElement(p,null):n?c.a.createElement(d,null):i&&c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Recomendado por ",c.a.createElement("span",{className:"b"},i.recommendedBy)),c.a.createElement("h1",{className:"title t1"},i.name),c.a.createElement("h2",{className:"title t3"},i.author),c.a.createElement("div",{className:"tags-group"},i.tags.map((function(e,a){return c.a.createElement(l.b,{key:e.id,to:"/buscar-libro/filtrar?tag=".concat(e.id)},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(a)}),c.a.createElement("label",{htmlFor:"tag-".concat(a),className:"tag ".concat(e.isChecked?"is-checked":"")},e.name))}))),c.a.createElement("p",null,i.comment),c.a.createElement("div",{className:"go-back"},c.a.createElement(l.b,{to:"/",className:"btn-line"},"Devolver a la estanter\xeda")),c.a.createElement(D,null)))}),Q=(t(89),function(e){var a=e.handleTagSelection,t=e.queryTag,n=Object(b.b)(j),r=n.loading,o=n.error,l=n.data;if(o)return c.a.createElement(p,null);if(r)return c.a.createElement(d,null);var i=l.tags;return c.a.createElement("div",{className:"search-books page"},c.a.createElement("div",{className:"content"},o?c.a.createElement(p,null):r?c.a.createElement(d,null):i&&c.a.createElement("form",null,c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Estoy buscando un libro para..."),c.a.createElement(S,{queryTag:t,tags:i,handleTagSelection:function(e){return a(e)}})))))}),z=(t(90),function(e){var a=e.match,t=Object(b.a)(B),n=Object(i.a)(t,1)[0],r=Object(b.b)(x,{variables:{id:a.params.bookId}}),o=r.loading,m=r.error,s=r.data,u=s&&s.book;return c.a.createElement("div",{className:"book-details page"},m?c.a.createElement(p,null):o?c.a.createElement(d,null):u&&c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Alguien ha recomendado un nuevo libro"),c.a.createElement("h1",{className:"title t1"},u.name),c.a.createElement("h2",{className:"title t3"},u.author),c.a.createElement("div",{className:"tags-group"},u.tags.map((function(e,a){return c.a.createElement(l.b,{key:e.id,to:"/buscar-libro/filtrar?tag=".concat(e.id)},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(a)}),c.a.createElement("label",{htmlFor:"tag-".concat(a),className:"tag ".concat(e.isChecked?"is-checked":"")},e.name))}))),c.a.createElement("p",null,"Este libro espera moderaci\xf3n para ser publicado en Books x People"),c.a.createElement("button",{className:"btn",onClick:function(){return u.id,void n({variables:{id:a.params.bookId},refetchQueries:[{query:y},{query:x}]})}},"Aprobar este libro"),u.published&&c.a.createElement("p",{className:"b"},"Libro incluido en la estanter\xeda, \xa1gracias!")))});var J=Object(m.f)((function(e){var a=e.location,t=u.a.parse(a.search),r=Object(n.useState)([]),o=Object(i.a)(r,2),l=o[0],s=o[1];return c.a.createElement("main",null,"/"!==a.pathname&&c.a.createElement(P,null),c.a.createElement("section",{className:"section_1-2 section-fixed"},c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/",exact:!0,component:A}),c.a.createElement(m.a,{path:"/recomendar-libro",component:I}),c.a.createElement(m.a,{path:"/gracias/:id",component:M}),c.a.createElement(m.a,{path:"/libro/:bookId",render:function(e){return c.a.createElement(F,e)}}),c.a.createElement(m.a,{path:"/buscar-libro",render:function(){return c.a.createElement(Q,{handleTagSelection:function(e){return function(e){s(e)}(e)},queryTag:t.tag})}}),c.a.createElement(m.a,{path:"/approved/:bookId",render:function(e){return c.a.createElement(z,e)}}))),c.a.createElement("section",{className:"section_1-2 section-fixed book-list-container ".concat("/"!==a.pathname?"header-layout":"")},c.a.createElement($,Object.assign({selectedTags:l,queryTag:t.tag},a))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=t(9),W=new E.a({uri:"https://books-x-people.herokuapp.com/graphql"});o.a.render(c.a.createElement(R.a,{client:W},c.a.createElement(l.a,null,c.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.1e919f29.chunk.js.map