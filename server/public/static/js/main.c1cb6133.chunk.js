(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,a,t){e.exports=t(64)},47:function(e,a,t){},49:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},62:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(34),l=t.n(r),o=t(7),i=t(16),s=t(17),m=(t(47),t(35)),u=t.n(m),d=function(){return"Fetching data..."},p=function(){return"Sorry. There is not data available right now. Please try later"},h=(t(49),t(13)),E=t(23),b=t(19);function g(){var e=Object(E.a)(["\n    query($id:ID){\n        book(id:$id){\n            id\n            name\n            comment\n            author\n            recommendedBy\n            tags {\n                name\n                id\n            }\n        }\n    }\n"]);return g=function(){return e},e}function f(){var e=Object(E.a)(["\nmutation(\n    $name:String!, \n    $comment:String!, \n    $author: String!, \n    $recommendedBy: String!,\n    $moderated: Boolean!,\n    $published: Boolean!,\n    $width: String!,\n    $height: String!,\n    $tags: [ID!]!\n    ){\n    addBook(\n        name:$name, \n        comment:$comment, \n        author:$author, \n        recommendedBy:$recommendedBy,\n        moderated: $moderated,\n        published: $published,\n        width: $width,\n        height: $height,\n        tags: $tags\n    ){\n        id\n    }\n}\n"]);return f=function(){return e},e}function v(){var e=Object(E.a)(["\n{\n    tags{\n        name\n        id\n    }\n}\n"]);return v=function(){return e},e}function k(){var e=Object(E.a)(["\n{\n    books {\n        name\n        id\n        author\n        width\n        height\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return k=function(){return e},e}var N=Object(b.b)(k()),O=Object(b.b)(v()),y=Object(b.b)(f()),j=Object(b.b)(g()),T=function(e){var a=e.name,t=e.width,n=e.author,r=e.height,l=e.id,i=e.getSelected,s=(e.pickedBook,e.tags),m=e.selectedTags,u=e.queryTag,d=a.length>25||n.length>25?.6:.8,p=t.replace("em","")*d+"em";return c.a.createElement("li",{onClick:i,className:function(e){var a=e.map((function(e){return e.id})),t=Object.values(m);return t.push(u),!!t.map((function(e){return a.includes(e)})).includes(!0)}(s)?"selected-by-tag":""},c.a.createElement(o.b,{to:"/libro/".concat(l)},c.a.createElement("div",{className:"vertical-text",style:{width:t,height:r,fontSize:p}},c.a.createElement("span",{className:"book-title"},a),c.a.createElement("span",{className:"book-author"},n))))},S=function(e){var a=e.selectedTags,t=e.queryTag,r=e.pathname,l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],m=o[1],u=Object(h.b)(N),E=u.loading,b=u.error,g=u.data,f=g&&g.books;return b?c.a.createElement(p,null):E?c.a.createElement(d,null):f&&c.a.createElement("ul",{className:"book-list ".concat((a.length||t)&&r.includes("/buscar-libro")?"search-mode":"")},f.map((function(e){return c.a.createElement(T,Object.assign({},e,{key:e.id,pickedBook:s,getSelected:function(){return m(e.id)},selectedTags:a,queryTag:t}))})))},x=t(20),q=(t(56),t(57),function(e){var a=e.tags,t=e.handleTagSelection,r=e.queryTag,l=Object(n.useState)(a),o=Object(i.a)(l,2),s=o[0],m=o[1];Object(n.useEffect)((function(){m(a)}));return s&&c.a.createElement("div",{className:"tags-group"},s.map((function(e,n){return c.a.createElement("a",{key:e.id},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(n),onClick:function(e){return function(e){a.forEach((function(a){a.name===e.target.value&&(a.isChecked=e.target.checked)}));var n=a.filter((function(e){return!0===e.isChecked}));return m(n),t&&t(n.map((function(e){return e.id})))}(e)}}),c.a.createElement("label",{htmlFor:"tag-".concat(n),className:"tag ".concat(e.isChecked||r===e.id?"is-checked":"")},e.name))})))}),B=function(e){var a=e.history,t=Object(h.a)(y),r=Object(i.a)(t,1)[0],l=Object(h.b)(O).data,s=Object(n.useState)({name:"",author:"",comment:"",recommendedBy:"",tags:[]}),m=Object(i.a)(s,2),u=m[0],d=m[1];Object(n.useEffect)((function(){if(l&&l.tags){var e=p(l.tags).slice(0,6).map((function(e){return Object(x.a)({},e,{isChecked:!1})}));d(Object(x.a)({},u,{tags:e}))}}),[l]);var p=function(e){for(var a,t,n=e.length;n;a=parseInt(Math.random()*n),t=e[--n],e[n]=e[a],e[a]=t);return e};return c.a.createElement("div",{className:"add-book page"},c.a.createElement("form",{id:"add-book",className:"content",onSubmit:function(e){return function(e){e.preventDefault();var t={width:Math.floor(2*Math.random())+1.75+"em",height:Math.floor(15*Math.random())+80+"%"},n=u.tags.filter((function(e){return 1==e.isChecked})).map((function(e){return e.id}));console.log(n),r({variables:{author:u.author,name:u.name,comment:u.comment,recommendedBy:u.recommendedBy,moderated:!1,published:!1,width:t.width,height:t.height,tags:n},refetchQueries:[{query:N}]}).then((function(e){console.log(e);var t=e.data.addBook.id;a.push("/gracias/".concat(t))}))}(e)}},c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Tu nombre:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(x.a)({},u,{recommendedBy:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"T\xedtulo del libro:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(x.a)({},u,{name:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Autor:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return d(Object(x.a)({},u,{author:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Este es un libro perfecto para..."),c.a.createElement(q,{tags:u.tags})),c.a.createElement("input",{type:"text",className:"create-tag",placeholder:"A\xf1ade tu propia etiqueta"})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"\xbfPor qu\xe9 lo recomiendas?"),c.a.createElement("textarea",{rows:"5",onChange:function(e){return d(Object(x.a)({},u,{comment:e.target.value}))}})),c.a.createElement("div",{className:"buttons"},c.a.createElement(o.b,{to:"/",className:"btn-line-black"},"Cancelar"),c.a.createElement("button",{className:"btn-black"},"A\xf1adir libro"))))},w=(t(58),function(){return c.a.createElement("div",{className:"intro"},c.a.createElement("h1",{className:"title t1"},"Books x People"),c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Cuando leemos,  escuchamos nuestros pensamientos en palabras de otros. Nos inspiramos, nos sentimos acompa\xf1ados y hacemos viajes de interior."),c.a.createElement("p",null,"En estos tiempos dif\xedciles un libro puede ser un gran aliado. Deja aqu\xed tu lectura recomendada."),c.a.createElement("p",null,"Recomienda un libro para estos d\xedas en casa. ",c.a.createElement("span",{className:"b"},"#YoMeQuedoEnCasa"))),c.a.createElement("div",{className:"cta"},c.a.createElement(o.b,{to:"/recomendar-libro",className:"btn"},"A\xf1adir un libro a la estanter\xeda"),c.a.createElement(o.b,{to:"/buscar-libro",className:"btn-line"},"Buscar libro")))}),C=(t(59),function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://books-x-people.herokuapp.com/graphql",REACT_APP_URL:"https://books-x-people.herokuapp.com/"})),c.a.createElement("header",null,c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com/","/book-icon.svg"),alt:"Book icon"}),c.a.createElement(o.b,{to:"/"},c.a.createElement("p",{className:"title t3 vertical-text"},"Books x People")),c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com/","/people-icon.svg"),alt:"People icon"}))}),$=(t(60),t(61),function(){return c.a.createElement("div",{className:"social-sharing"},c.a.createElement("p",null,"Compartir:"),c.a.createElement("ul",{className:"social-icons horizontal-list"},c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com/","/whatsapp-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com/","/twitter-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com/","/linkedin-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com/","/instagram-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{href:"/"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com/","/mail-icon.svg")})))))}),_=function(){return c.a.createElement("div",{className:"thank-you container page"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"title t3"},"Gracias por tu contribuci\xf3n"),c.a.createElement("p",null,"En Books X People queremos que compartir sea un acto de generosidad, respeto, empat\xeda y comunicaci\xf3n."),c.a.createElement("p",null,"Tenemos que moderar tu participaci\xf3n para asegurarnos de que cumple las normas de la comunidad."),c.a.createElement("p",null,"Seguro que tu libro est\xe1 pronto en nuestras estanter\xedas."),c.a.createElement($,null),c.a.createElement("div",{className:"go-back"},c.a.createElement(o.b,{to:"/",className:"btn-line"},"Volver"))))},P=(t(62),function(e){var a=e.match,t=Object(h.b)(j,{variables:{id:a.params.bookId}}),n=t.loading,r=t.error,l=t.data,i=l&&l.book;return c.a.createElement("div",{className:"book-details page"},r?c.a.createElement(p,null):n?c.a.createElement(d,null):i&&c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Recomendado por ",c.a.createElement("span",{className:"b"},i.recommendedBy)),c.a.createElement("h1",{className:"title t1"},i.name),c.a.createElement("h2",{className:"title t3"},i.author),c.a.createElement("div",{className:"tags-group"},i.tags.map((function(e,a){return c.a.createElement(o.b,{key:e.id,to:"/buscar-libro/filtrar?tag=".concat(e.id)},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(a)}),c.a.createElement("label",{htmlFor:"tag-".concat(a),className:"tag ".concat(e.isChecked?"is-checked":"")},e.name))}))),c.a.createElement("p",null,i.comment),c.a.createElement("div",{className:"go-back"},c.a.createElement(o.b,{to:"/",className:"btn-line"},"Devolver a la estanter\xeda")),c.a.createElement($,null)))}),A=(t(63),function(e){var a=e.handleTagSelection,t=e.queryTag,n=Object(h.b)(O),r=n.loading,l=n.error,o=n.data;if(l)return c.a.createElement(p,null);if(r)return c.a.createElement(d,null);var i=o.tags;return c.a.createElement("div",{className:"search-book page"},c.a.createElement("div",{className:"content"},l?c.a.createElement(p,null):r?c.a.createElement(d,null):i&&c.a.createElement("form",null,c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Estoy buscando un libro para..."),c.a.createElement(q,{queryTag:t,tags:i,handleTagSelection:function(e){return a(e)}})))))});var D=Object(s.f)((function(e){var a=e.location,t=u.a.parse(a.search),r=Object(n.useState)([]),l=Object(i.a)(r,2),o=l[0],m=l[1];return c.a.createElement("main",null,"/"!==a.pathname&&c.a.createElement(C,null),c.a.createElement("section",{className:"section_1-2 section-fixed"},c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:w}),c.a.createElement(s.a,{path:"/recomendar-libro",component:B}),c.a.createElement(s.a,{path:"/gracias/:id",component:_}),c.a.createElement(s.a,{path:"/libro/:bookId",render:function(e){return c.a.createElement(P,e)}}),c.a.createElement(s.a,{path:"/buscar-libro",render:function(){return c.a.createElement(A,{handleTagSelection:function(e){return function(e){m(e)}(e)},queryTag:t.tag})}}))),c.a.createElement("section",{className:"section_1-2 section-fixed book-list-container ".concat("/"!==a.pathname?"header-layout":"")},c.a.createElement(S,Object.assign({selectedTags:o,queryTag:t.tag},a))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=t(9),R=new b.a({uri:"https://books-x-people.herokuapp.com/graphql"});l.a.render(c.a.createElement(I.a,{client:R},c.a.createElement(o.a,null,c.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c1cb6133.chunk.js.map