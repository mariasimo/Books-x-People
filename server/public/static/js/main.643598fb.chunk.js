(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,a,t){e.exports=t(93)},58:function(e,a,t){},60:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(44),o=t.n(r),l=t(4),i=t(11),s=t(21),m=(t(58),t(45)),u=t.n(m),d=function(){return"Fetching data..."},p=function(){return"Sorry. There is not data available right now. Please try later"},b=(t(60),t(8)),h=t(19),g=t(15);function E(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    deleteTag(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return E=function(){return e},e}function f(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    deleteBook(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return f=function(){return e},e}function k(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    approveTag(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return k=function(){return e},e}function v(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    approveBook(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return v=function(){return e},e}function N(){var e=Object(h.a)(["\n    query($id:ID){\n        book(id:$id){\n            id\n            name\n            comment\n            author\n            recommendedBy\n            published\n            tags {\n                name\n                id\n                moderated\n                published\n            }\n        }\n    }\n"]);return N=function(){return e},e}function j(){var e=Object(h.a)(["\nmutation(\n    $name:String!\n    $moderated: Boolean!,\n    $published: Boolean!,\n    ){\n    addTag(\n        name:$name\n        moderated: $moderated,\n        published: $published\n    ){\n        id\n    }\n}\n"]);return j=function(){return e},e}function O(){var e=Object(h.a)(["\nmutation(\n    $name:String!, \n    $comment:String!, \n    $author: String!, \n    $recommendedBy: String!,\n    $moderated: Boolean!,\n    $published: Boolean!,\n    $width: String!,\n    $height: String!,\n    $tags: [ID!]!\n    ){\n    addBook(\n        name:$name, \n        comment:$comment, \n        author:$author, \n        recommendedBy:$recommendedBy,\n        moderated: $moderated,\n        published: $published,\n        width: $width,\n        height: $height,\n        tags: $tags\n    ){\n        id\n        name\n        comment\n        author\n        recommendedBy\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return O=function(){return e},e}function y(){var e=Object(h.a)(["\n{\n    tags{\n        name\n        id\n    }\n}\n"]);return y=function(){return e},e}function w(){var e=Object(h.a)(["\n{\n    books {\n        name\n        id\n        author\n        width\n        height\n        createdAt\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return w=function(){return e},e}var x=Object(g.b)(w()),$=Object(g.b)(y()),B=Object(g.b)(O()),T=Object(g.b)(j()),q=Object(g.b)(N()),C=Object(g.b)(v()),S=Object(g.b)(k()),I=Object(g.b)(f()),D=Object(g.b)(E()),M=function(e){var a=e.name,t=e.width,n=e.author,r=e.height,o=e.id,i=e.getSelected,s=(e.pickedBook,e.tags),m=e.selectedTags,u=e.queryTag,d=a.length>25||n.length>25?.6:.75,p=t.replace("em","")*d+"em";return c.a.createElement("li",{onClick:i,className:function(e){var a=e.map((function(e){return e.id})),t=Object.values(m);return t.push(u),!!t.map((function(e){return a.includes(e)})).includes(!0)}(s)?"selected-by-tag":""},c.a.createElement(l.b,{to:"/libro/".concat(o)},c.a.createElement("div",{className:"vertical-text",style:{width:t,height:r,fontSize:p}},c.a.createElement("span",{className:"book-title"},a),c.a.createElement("span",{className:"book-author"},n))))},P=function(e){var a=e.selectedTags,t=e.queryTag,r=e.pathname,o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],m=l[1],u=Object(b.b)(x),h=u.loading,g=u.error,E=u.data,f=E&&E.books;return c.a.createElement("div",{className:"book-list-container"},g?c.a.createElement(p,null):h?c.a.createElement(d,null):f&&c.a.createElement("ul",{className:"book-list ".concat((a.length||t)&&r.includes("/buscar-libro")?"search-mode":"")},f.sort((function(e,a){return a.createdAt.localeCompare(e.createdAt)})).map((function(e){return c.a.createElement(M,Object.assign({},e,{key:e.id,pickedBook:s,getSelected:function(){return m(e.id)},selectedTags:a,queryTag:t}))}))))},A=t(23),_=t(20),Q=(t(67),t(68),function(e){var a=e.tags,t=e.handleTagSelection,r=e.queryTag,o=Object(n.useState)(a),l=Object(i.a)(o,2),s=l[0],m=l[1];Object(n.useEffect)((function(){m(a)}));return s&&c.a.createElement("div",{className:"tags-group"},s.map((function(e,n){return c.a.createElement("a",{key:e.id},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(n),onClick:function(e){return function(e){a.forEach((function(a){a.name===e.target.value&&(a.isChecked=e.target.checked)}));var n=a.filter((function(e){return!0===e.isChecked}));return m(n),t&&t(n.map((function(e){return e.id})))}(e)}}),c.a.createElement("label",{htmlFor:"tag-".concat(n),className:"tag ".concat(e.isChecked||r===e.id?"is-checked":"")},e.name))})))}),z=t(52),F=t.n(z),R=function(e){var a=e.history,t=Object(b.a)(B),r=Object(i.a)(t,1)[0],o=Object(b.a)(T,{onCompleted:function(e){h(Object(_.a)({},p,{newTags:[].concat(Object(A.a)(p.newTags),[e.addTag.id])}))}}),s=Object(i.a)(o,1)[0],m=Object(b.b)($).data,u=Object(n.useState)({name:"",author:"",comment:"",recommendedBy:"",tags:[],newTags:[]}),d=Object(i.a)(u,2),p=d[0],h=d[1];Object(n.useEffect)((function(){if(m&&m.tags){var e=function(e){for(var a,t,n=e.length;n;a=parseInt(Math.random()*n),t=e[--n],e[n]=e[a],e[a]=t);return e}(m.tags).slice(0,6).map((function(e){return Object(_.a)({},e,{isChecked:!1})}));h(Object(_.a)({},p,{tags:e}))}}),[m]),Object(n.useEffect)((function(){p.newTags.length&&g(p.tags,p.newTags)}),[p]);var g=function(e,t){var n={width:Math.floor(2*Math.random())+1.75+"em",height:Math.floor(15*Math.random())+80+"%"},c=e.filter((function(e){return!0===e.isChecked&&void 0!==e.id})).map((function(e){return e.id}));c.push.apply(c,Object(A.a)(t)),r({variables:{author:p.author,name:p.name,comment:p.comment,recommendedBy:p.recommendedBy,moderated:!1,published:!1,width:n.width,height:n.height,tags:c},refetchQueries:[{query:x}]}).then((function(e){f(e.data.addBook);var t=e.data.addBook.id;a.push("/gracias/".concat(t))})).catch((function(e){return console.log(e)}))},E=function(e){e.preventDefault();var a=p.tags.filter((function(e){return void 0===e.id}));a.length?a.forEach((function(e){return s({variables:{name:e.name,moderated:!1,published:!1}})})):g(p.tags,p.newTags)},f=function(e){return F.a.post("".concat("https://books-x-people.herokuapp.com/api","/send-mail"),e)};return c.a.createElement("div",{className:"add-book page"},c.a.createElement("form",{id:"add-book",className:"content",onSubmit:function(e){return E(e)}},c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Tu nombre:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(_.a)({},p,{recommendedBy:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"T\xedtulo del libro:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(_.a)({},p,{name:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"Autor:"),c.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(_.a)({},p,{author:e.target.value}))}})),c.a.createElement("div",{className:"field"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Este es un libro perfecto para..."),c.a.createElement(Q,{tags:Object(A.a)(p.tags)})),c.a.createElement("input",{type:"text",className:"create-tag",placeholder:"A\xf1ade tu propia etiqueta",onKeyDown:function(e){return function(e){if("Enter"===e.key){e.preventDefault();var a={name:e.target.value,isChecked:!0};h(Object(_.a)({},p,{tags:[].concat(Object(A.a)(p.tags),[a])})),document.querySelector(".create-tag").value=" "}}(e)&&e.preventDefault()}})),c.a.createElement("div",{className:"field"},c.a.createElement("label",null,"\xbfPor qu\xe9 lo recomiendas?"),c.a.createElement("textarea",{rows:"5",onChange:function(e){return h(Object(_.a)({},p,{comment:e.target.value}))}})),c.a.createElement("div",{className:"buttons"},c.a.createElement(l.b,{to:"/",className:"btn-line-black"},"Cancelar"),c.a.createElement("button",{className:"btn-black"},"A\xf1adir libro"))))},V=(t(85),function(){return c.a.createElement("div",{className:"intro"},c.a.createElement("h1",{className:"title t1"},"Books x People"),c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Cuando leemos,  escuchamos nuestros pensamientos en palabras de otros. Nos inspiramos, nos sentimos acompa\xf1ados y hacemos viajes de interior."),c.a.createElement("p",null,"En estos tiempos dif\xedciles un libro puede ser un gran aliado. Deja aqu\xed tu lectura recomendada."),c.a.createElement("p",null,"Recomienda un libro para estos d\xedas en casa. ",c.a.createElement("span",{className:"b"},"#YoMeQuedoEnCasa"))),c.a.createElement("div",{className:"button-group"},c.a.createElement(l.b,{to:"/recomendar-libro",className:"btn"},"A\xf1adir un libro a la estanter\xeda"),c.a.createElement(l.b,{to:"/buscar-libro",className:"btn-line"},"Buscar libro")))}),Y=(t(86),function(){return c.a.createElement("header",null,c.a.createElement(l.b,{to:"/"},c.a.createElement("div",{className:"desktop"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/book-icon.svg"),alt:"Book icon"}),c.a.createElement("p",{className:"title t3 vertical-text"},"Books x People"),c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/people-icon.svg"),alt:"People icon"})),c.a.createElement("div",{className:"mobile"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/acronym.svg"),alt:"People icon"}),c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/pictogram.svg"),alt:"People icon"}))))}),J=(t(87),t(88),function(e){var a,t=e.bookId,n=e.bookName;return a=t&&n?"Books%20x%20People%20\u2014%20%23YoMeQuedoEnCasa%20leyendo%20".concat(n,"%20https://books-x-people.herokuapp.com/libro/").concat(t):"Books%20x%20People%20\u2014%20Recomienda%20un%20libro%20%23YoMeQuedoEnCasa%20https://books-x-people.herokuapp.com",c.a.createElement("div",{className:"social-sharing"},c.a.createElement("p",null,"Compartir:"),c.a.createElement("ul",{className:"social-icons horizontal-list"},c.a.createElement("li",{class:"whastapp-web"},c.a.createElement("a",{target:"_blank",href:"https://web.whatsapp.com/send?text=".concat(a),"data-action":"share/whatsapp/share"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/whatsapp-icon.svg")}))),c.a.createElement("li",{class:"whastapp-mobile"},c.a.createElement("a",{target:"_blank",href:"whatsapp://send?text=".concat(a),"data-action":"share/whatsapp/share"},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/whatsapp-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",href:"https://twitter.com/intent/tweet?text=".concat(a)},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/twitter-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat("https://books-x-people.herokuapp.com","&title=Books%20%x%20People&summary=").concat(a,"&source=").concat("https://books-x-people.herokuapp.com")},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/linkedin-icon.svg")}))),c.a.createElement("li",null,c.a.createElement("a",{target:"_blank",href:"mailto:?&subject=&body=".concat(a)},c.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/mail-icon.svg")})))))}),W=function(){return c.a.createElement("div",{className:"thank-you container page"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"title t3"},"Gracias por tu contribuci\xf3n"),c.a.createElement("p",null,"En Books X People queremos que compartir sea un acto de generosidad, respeto, empat\xeda y comunicaci\xf3n."),c.a.createElement("p",null,"Tenemos que moderar tu participaci\xf3n para asegurarnos de que cumple las normas de la comunidad."),c.a.createElement("p",null,"Seguro que tu libro est\xe1 pronto en nuestras estanter\xedas."),c.a.createElement(J,null),c.a.createElement("div",{className:"go-back"},c.a.createElement(l.b,{to:"/",className:"btn-line"},"Volver"))))},G=(t(89),function(e){var a=e.match,t=Object(b.b)(q,{variables:{id:a.params.bookId}}),n=t.loading,r=t.error,o=t.data,i=o&&o.book;return c.a.createElement("div",{className:"book-details page"},r?c.a.createElement(p,null):n?c.a.createElement(d,null):i&&c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Recomendado por ",c.a.createElement("span",{className:"b"},i.recommendedBy)),c.a.createElement("h1",{className:"title t1"},i.name),c.a.createElement("h2",{className:"title t3"},i.author),c.a.createElement("div",{className:"tags-group"},i.tags.map((function(e,a){return c.a.createElement(l.b,{key:e.id,to:"/buscar-libro/filtrar?tag=".concat(e.id)},c.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(a)}),c.a.createElement("label",{htmlFor:"tag-".concat(a),className:"tag ".concat(e.isChecked?"is-checked":"")},e.name))}))),c.a.createElement("p",null,i.comment),c.a.createElement("div",{className:"go-back"},c.a.createElement(l.b,{to:"/",className:"btn-line"},"Devolver a la estanter\xeda")),c.a.createElement(J,{bookId:i.id,bookName:i.name})))}),K=(t(90),function(e){var a=e.handleTagSelection,t=e.queryTag,n=Object(b.b)($),r=n.loading,o=n.error,l=n.data;if(o)return c.a.createElement(p,null);if(r)return c.a.createElement(d,null);var i=l.tags;return c.a.createElement("div",{className:"search-books page"},c.a.createElement("div",{className:"content"},o?c.a.createElement(p,null):r?c.a.createElement(d,null):i&&c.a.createElement("form",null,c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Estoy buscando un libro para..."),c.a.createElement(Q,{queryTag:t,tags:i,handleTagSelection:function(e){return a(e)}})))))}),L=(t(91),function(e){var a=e.history,t=e.match,n=Object(b.a)(C),r=Object(i.a)(n,1)[0],o=Object(b.a)(S),l=Object(i.a)(o,1)[0],s=Object(b.a)(I),m=Object(i.a)(s,1)[0],u=Object(b.a)(D),h=Object(i.a)(u,1)[0],g=Object(b.b)(q,{variables:{id:t.params.bookId}}),E=g.loading,f=g.error,k=g.data,v=k&&k.book,N=v&&v.tags.filter((function(e){return!1===e.moderated}));return c.a.createElement("div",{className:"book-details page"},f?c.a.createElement(p,null):E?c.a.createElement(d,null):v&&c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"Alguien ha recomendado un nuevo libro"),c.a.createElement("h1",{className:"title t1"},v.name),c.a.createElement("h2",{className:"title t3"},v.author),c.a.createElement("div",{className:"tags-group"},v.tags.map((function(e,a){return c.a.createElement("span",{className:"tag"},e.name)}))),c.a.createElement("p",{className:"comment"},v.comment),c.a.createElement("div",{className:"moderation"},c.a.createElement("h2",null,"Moderaci\xf3n"),c.a.createElement("p",null,"Este libro espera moderaci\xf3n para ser publicado en Books x People. "),N.length>0&&c.a.createElement("p",null,c.a.createElement("span",{className:"b"},"\xa1Atenci\xf3n!")," El usuario ha incluido nuevas etiquetas. Val\xeddalas con un click y cuando apruebes el libro se incluir\xe1n en la selecci\xf3n de tags."),c.a.createElement(Q,{tags:Object(A.a)(N)})),c.a.createElement("div",{className:"button-group"},c.a.createElement("button",{className:"btn-line",onClick:function(){return function(e,t){console.log(e,t),m({variables:{id:e}}).then((function(n){t&&t.forEach((function(e){h({variables:{id:e.id}}).then((function(e){return console.log(e)}))})),a.push("/confirmacion/borrado/".concat(e))}))}(v.id,N)}},"Borrar todo"),c.a.createElement("button",{className:"btn",onClick:function(){return function(e,n){var c=n.filter((function(e){return!0===e.isChecked})).map((function(e){return e.id})),o=n.filter((function(e){return!0!==e.isChecked})).map((function(e){return e.id}));c.length&&c.forEach((function(e){l({variables:{id:e}}).then((function(e){return console.log(e)}))})),o.length&&o.forEach((function(e){h({variables:{id:e}}).then((function(e){return console.log(e)}))})),r({variables:{id:t.params.bookId},refetchQueries:[{query:x},{query:q}]}).then((function(t){return a.push("/libro/".concat(e))}))}(v.id,N)}},"Aprobar este libro")),v.published&&c.a.createElement("p",{className:"b"},"Libro incluido en la estanter\xeda, \xa1gracias!")))}),X=function(){return c.a.createElement("div",{className:"page"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"title t2"},"Dicho y hecho"),c.a.createElement("p",null,"Toda la informaci\xf3n de este libro se ha borrado con \xe9xito de la base de datos"),c.a.createElement("div",{className:"go-back"},c.a.createElement("br",null),c.a.createElement(l.b,{to:"/",className:"btn-line"},"Volver al inicio"))))},H=(t(92),function(){return c.a.createElement("footer",null,c.a.createElement("span",{className:"small"},"Mar\xeda Sim\xf3, en Madrid. Marzo 2020"),c.a.createElement("div",{className:"social"},c.a.createElement("a",{href:"https://github.com/mariasimo/",target:"_blank"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/github-icon.svg")})),c.a.createElement("a",{href:"https://www.linkedin.com/in/maria-simo/",target:"_blank"},c.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/linkedin-icon.svg")}))))});var U=Object(s.f)((function(e){var a=e.location,t=u.a.parse(a.search),r=Object(n.useState)([]),o=Object(i.a)(r,2),l=o[0],m=o[1];return c.a.createElement("main",null,"/"!==a.pathname&&c.a.createElement(Y,null),c.a.createElement("section",{className:"section_1-2 section-fixed"},c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:V}),c.a.createElement(s.a,{path:"/recomendar-libro",component:R}),c.a.createElement(s.a,{path:"/gracias/:id",component:W}),c.a.createElement(s.a,{path:"/libro/:bookId",render:function(e){return c.a.createElement(G,e)}}),c.a.createElement(s.a,{path:"/buscar-libro",render:function(){return c.a.createElement(K,{handleTagSelection:function(e){return function(e){m(e)}(e)},queryTag:t.tag})}}),c.a.createElement(s.a,{path:"/approved/:bookId",render:function(e){return c.a.createElement(L,e)}}),c.a.createElement(s.a,{path:"/confirmacion/:result/:bookId",render:function(e){return c.a.createElement(X,e)}}))),c.a.createElement("section",{className:"section_1-2 section-fixed ".concat("/"!==a.pathname?"header-layout":"")},c.a.createElement(P,Object.assign({selectedTags:l,queryTag:t.tag},a)),c.a.createElement(H,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=t(10),ee=new g.a({uri:"https://books-x-people.herokuapp.com/graphql"});o.a.render(c.a.createElement(Z.a,{client:ee},c.a.createElement(l.a,null,c.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.643598fb.chunk.js.map