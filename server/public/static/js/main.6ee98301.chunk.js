(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,a,t){e.exports=t(92)},58:function(e,a,t){},60:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(44),o=t.n(c),l=t(7),i=t(11),s=t(21),u=(t(58),t(45)),m=t.n(u),d=function(){return"Fetching data..."},b=function(){return"Sorry. There is not data available right now. Please try later"},p=(t(60),t(8)),h=t(19),g=t(15);function E(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    deleteTag(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return E=function(){return e},e}function f(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    deleteBook(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return f=function(){return e},e}function v(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    approveTag(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return v=function(){return e},e}function k(){var e=Object(h.a)(["\nmutation(\n    $id:ID!\n    ){\n    approveBook(\n        id:$id\n    ){\n        id\n    }\n}\n"]);return k=function(){return e},e}function j(){var e=Object(h.a)(["\n    query($id:ID){\n        book(id:$id){\n            id\n            name\n            comment\n            author\n            recommendedBy\n            published\n            tags {\n                name\n                id\n                moderated\n                published\n            }\n        }\n    }\n"]);return j=function(){return e},e}function O(){var e=Object(h.a)(["\nmutation(\n    $name:String!\n    $moderated: Boolean!,\n    $published: Boolean!,\n    ){\n    addTag(\n        name:$name\n        moderated: $moderated,\n        published: $published\n    ){\n        id\n    }\n}\n"]);return O=function(){return e},e}function N(){var e=Object(h.a)(["\nmutation(\n    $name:String!, \n    $comment:String!, \n    $author: String!, \n    $recommendedBy: String!,\n    $moderated: Boolean!,\n    $published: Boolean!,\n    $width: String!,\n    $height: String!,\n    $tags: [ID!]!\n    ){\n    addBook(\n        name:$name, \n        comment:$comment, \n        author:$author, \n        recommendedBy:$recommendedBy,\n        moderated: $moderated,\n        published: $published,\n        width: $width,\n        height: $height,\n        tags: $tags\n    ){\n        id\n        name\n        comment\n        author\n        recommendedBy\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return N=function(){return e},e}function y(){var e=Object(h.a)(["\n{\n    tags{\n        name\n        id\n    }\n}\n"]);return y=function(){return e},e}function $(){var e=Object(h.a)(["\n{\n    books {\n        name\n        id\n        author\n        width\n        height\n        createdAt\n        tags{\n            name\n            id\n        }\n    }\n}\n"]);return $=function(){return e},e}var T=Object(g.b)($()),B=Object(g.b)(y()),w=Object(g.b)(N()),x=Object(g.b)(O()),q=Object(g.b)(j()),C=Object(g.b)(k()),S=Object(g.b)(v()),I=Object(g.b)(f()),D=Object(g.b)(E()),A=function(e){var a=e.name,t=e.width,n=e.author,c=e.height,o=e.id,i=e.getSelected,s=(e.pickedBook,e.tags),u=e.selectedTags,m=e.queryTag,d=a.length>25||n.length>25?.6:.8,b=t.replace("em","")*d+"em";return r.a.createElement("li",{onClick:i,className:function(e){var a=e.map((function(e){return e.id})),t=Object.values(u);return t.push(m),!!t.map((function(e){return a.includes(e)})).includes(!0)}(s)?"selected-by-tag":""},r.a.createElement(l.b,{to:"/libro/".concat(o)},r.a.createElement("div",{className:"vertical-text",style:{width:t,height:c,fontSize:b}},r.a.createElement("span",{className:"book-title"},a),r.a.createElement("span",{className:"book-author"},n))))},P=function(e){var a=e.selectedTags,t=e.queryTag,c=e.pathname,o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(p.b)(T),h=m.loading,g=m.error,E=m.data,f=E&&E.books;return g?r.a.createElement(b,null):h?r.a.createElement(d,null):f&&r.a.createElement("ul",{className:"book-list ".concat((a.length||t)&&c.includes("/buscar-libro")?"search-mode":"")},f.sort((function(e,a){return a.createdAt.localeCompare(e.createdAt)})).map((function(e){return r.a.createElement(A,Object.assign({},e,{key:e.id,pickedBook:s,getSelected:function(){return u(e.id)},selectedTags:a,queryTag:t}))})))},M=t(23),F=t(20),Q=(t(67),t(68),function(e){var a=e.tags,t=e.handleTagSelection,c=e.queryTag,o=Object(n.useState)(a),l=Object(i.a)(o,2),s=l[0],u=l[1];Object(n.useEffect)((function(){u(a)}));return s&&r.a.createElement("div",{className:"tags-group"},s.map((function(e,n){return r.a.createElement("a",{key:e.id},r.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(n),onClick:function(e){return function(e){a.forEach((function(a){a.name===e.target.value&&(a.isChecked=e.target.checked)}));var n=a.filter((function(e){return!0===e.isChecked}));return u(n),t&&t(n.map((function(e){return e.id})))}(e)}}),r.a.createElement("label",{htmlFor:"tag-".concat(n),className:"tag ".concat(e.isChecked||c===e.id?"is-checked":"")},e.name))})))}),z=t(52),J=t.n(z),R=function(e){var a=e.history,t=Object(p.a)(w),c=Object(i.a)(t,1)[0],o=Object(p.a)(x,{onCompleted:function(e){h(Object(F.a)({},b,{newTags:[].concat(Object(M.a)(b.newTags),[e.addTag.id])}))}}),s=Object(i.a)(o,1)[0],u=Object(p.b)(B).data,m=Object(n.useState)({name:"",author:"",comment:"",recommendedBy:"",tags:[],newTags:[]}),d=Object(i.a)(m,2),b=d[0],h=d[1];Object(n.useEffect)((function(){if(u&&u.tags){var e=function(e){for(var a,t,n=e.length;n;a=parseInt(Math.random()*n),t=e[--n],e[n]=e[a],e[a]=t);return e}(u.tags).slice(0,6).map((function(e){return Object(F.a)({},e,{isChecked:!1})}));h(Object(F.a)({},b,{tags:e}))}}),[u]),Object(n.useEffect)((function(){b.newTags.length&&g(b.tags,b.newTags)}),[b]);var g=function(e,t){var n={width:Math.floor(2*Math.random())+1.75+"em",height:Math.floor(15*Math.random())+80+"%"},r=e.filter((function(e){return!0===e.isChecked&&void 0!==e.id})).map((function(e){return e.id}));r.push.apply(r,Object(M.a)(t)),c({variables:{author:b.author,name:b.name,comment:b.comment,recommendedBy:b.recommendedBy,moderated:!1,published:!1,width:n.width,height:n.height,tags:r},refetchQueries:[{query:T}]}).then((function(e){f(e.data.addBook);var t=e.data.addBook.id;a.push("/gracias/".concat(t))})).catch((function(e){return console.log(e)}))},E=function(e){e.preventDefault();var a=b.tags.filter((function(e){return void 0===e.id}));a.length?a.forEach((function(e){return s({variables:{name:e.name,moderated:!1,published:!1}})})):g(b.tags,b.newTags)},f=function(e){return J.a.post("".concat("https://books-x-people.herokuapp.com/api","/send-mail"),e)};return r.a.createElement("div",{className:"add-book page"},r.a.createElement("form",{id:"add-book",className:"content",onSubmit:function(e){return E(e)}},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Tu nombre:"),r.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(F.a)({},b,{recommendedBy:e.target.value}))}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"T\xedtulo del libro:"),r.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(F.a)({},b,{name:e.target.value}))}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Autor:"),r.a.createElement("input",{type:"text",required:!0,onChange:function(e){return h(Object(F.a)({},b,{author:e.target.value}))}})),r.a.createElement("div",{className:"field"},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Este es un libro perfecto para..."),r.a.createElement(Q,{tags:Object(M.a)(b.tags)})),r.a.createElement("input",{type:"text",className:"create-tag",placeholder:"A\xf1ade tu propia etiqueta",onKeyDown:function(e){return function(e){if("Enter"===e.key){e.preventDefault();var a={name:e.target.value,isChecked:!0};h(Object(F.a)({},b,{tags:[].concat(Object(M.a)(b.tags),[a])})),document.querySelector(".create-tag").value=" "}}(e)&&e.preventDefault()}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"\xbfPor qu\xe9 lo recomiendas?"),r.a.createElement("textarea",{rows:"5",onChange:function(e){return h(Object(F.a)({},b,{comment:e.target.value}))}})),r.a.createElement("div",{className:"buttons"},r.a.createElement(l.b,{to:"/",className:"btn-line-black"},"Cancelar"),r.a.createElement("button",{className:"btn-black"},"A\xf1adir libro"))))},V=(t(85),function(){return r.a.createElement("div",{className:"intro"},r.a.createElement("h1",{className:"title t1"},"Books x People"),r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"Cuando leemos,  escuchamos nuestros pensamientos en palabras de otros. Nos inspiramos, nos sentimos acompa\xf1ados y hacemos viajes de interior."),r.a.createElement("p",null,"En estos tiempos dif\xedciles un libro puede ser un gran aliado. Deja aqu\xed tu lectura recomendada."),r.a.createElement("p",null,"Recomienda un libro para estos d\xedas en casa. ",r.a.createElement("span",{className:"b"},"#YoMeQuedoEnCasa"))),r.a.createElement("div",{className:"cta"},r.a.createElement(l.b,{to:"/recomendar-libro",className:"btn"},"A\xf1adir un libro a la estanter\xeda"),r.a.createElement(l.b,{to:"/buscar-libro",className:"btn-line"},"Buscar libro")))}),W=(t(86),function(){return r.a.createElement("header",null,r.a.createElement(l.b,{to:"/"},r.a.createElement("div",{className:"desktop"},r.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/book-icon.svg"),alt:"Book icon"}),r.a.createElement("p",{className:"title t3 vertical-text"},"Books x People"),r.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/people-icon.svg"),alt:"People icon"})),r.a.createElement("div",{className:"mobile"},r.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/acronym.svg"),alt:"People icon"}),r.a.createElement("img",{src:"".concat("https://books-x-people.herokuapp.com","/pictogram.svg"),alt:"People icon"}))))}),_=(t(87),t(88),function(){return r.a.createElement("div",{className:"social-sharing"},r.a.createElement("p",null,"Compartir:"),r.a.createElement("ul",{className:"social-icons horizontal-list"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/whatsapp-icon.svg")}))),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/twitter-icon.svg")}))),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/linkedin-icon.svg")}))),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/instagram-icon.svg")}))),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{alt:"social-sharing",src:"".concat("https://books-x-people.herokuapp.com","/mail-icon.svg")})))))}),G=function(){return r.a.createElement("div",{className:"thank-you container page"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"title t3"},"Gracias por tu contribuci\xf3n"),r.a.createElement("p",null,"En Books X People queremos que compartir sea un acto de generosidad, respeto, empat\xeda y comunicaci\xf3n."),r.a.createElement("p",null,"Tenemos que moderar tu participaci\xf3n para asegurarnos de que cumple las normas de la comunidad."),r.a.createElement("p",null,"Seguro que tu libro est\xe1 pronto en nuestras estanter\xedas."),r.a.createElement(_,null),r.a.createElement("div",{className:"go-back"},r.a.createElement(l.b,{to:"/",className:"btn-line"},"Volver"))))},K=(t(89),function(e){var a=e.match,t=Object(p.b)(q,{variables:{id:a.params.bookId}}),n=t.loading,c=t.error,o=t.data,i=o&&o.book;return r.a.createElement("div",{className:"book-details page"},c?r.a.createElement(b,null):n?r.a.createElement(d,null):i&&r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"Recomendado por ",r.a.createElement("span",{className:"b"},i.recommendedBy)),r.a.createElement("h1",{className:"title t1"},i.name),r.a.createElement("h2",{className:"title t3"},i.author),r.a.createElement("div",{className:"tags-group"},i.tags.map((function(e,a){return r.a.createElement(l.b,{key:e.id,to:"/buscar-libro/filtrar?tag=".concat(e.id)},r.a.createElement("input",{type:"checkbox",name:e.name,value:e.name,id:"tag-".concat(a)}),r.a.createElement("label",{htmlFor:"tag-".concat(a),className:"tag ".concat(e.isChecked?"is-checked":"")},e.name))}))),r.a.createElement("p",null,i.comment),r.a.createElement("div",{className:"go-back"},r.a.createElement(l.b,{to:"/",className:"btn-line"},"Devolver a la estanter\xeda")),r.a.createElement(_,null)))}),L=(t(90),function(e){var a=e.handleTagSelection,t=e.queryTag,n=Object(p.b)(B),c=n.loading,o=n.error,l=n.data;if(o)return r.a.createElement(b,null);if(c)return r.a.createElement(d,null);var i=l.tags;return r.a.createElement("div",{className:"search-books page"},r.a.createElement("div",{className:"content"},o?r.a.createElement(b,null):c?r.a.createElement(d,null):i&&r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Estoy buscando un libro para..."),r.a.createElement(Q,{queryTag:t,tags:i,handleTagSelection:function(e){return a(e)}})))))}),X=(t(91),function(e){var a=e.history,t=e.match,n=Object(p.a)(C),c=Object(i.a)(n,1)[0],o=Object(p.a)(S),l=Object(i.a)(o,1)[0],s=Object(p.a)(I),u=Object(i.a)(s,1)[0],m=Object(p.a)(D),h=Object(i.a)(m,1)[0],g=Object(p.b)(q,{variables:{id:t.params.bookId}}),E=g.loading,f=g.error,v=g.data,k=v&&v.book,j=k&&k.tags.filter((function(e){return!1===e.moderated}));return r.a.createElement("div",{className:"book-details page"},f?r.a.createElement(b,null):E?r.a.createElement(d,null):k&&r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"Alguien ha recomendado un nuevo libro"),r.a.createElement("h1",{className:"title t1"},k.name),r.a.createElement("h2",{className:"title t3"},k.author),r.a.createElement("div",{className:"tags-group"},k.tags.map((function(e,a){return r.a.createElement("span",{className:"tag"},e.name)}))),r.a.createElement("p",{className:"comment"},k.comment),r.a.createElement("div",{className:"moderation"},r.a.createElement("h2",null,"Moderaci\xf3n"),r.a.createElement("p",null,"Este libro espera moderaci\xf3n para ser publicado en Books x People. "),j.length>0&&r.a.createElement("p",null,r.a.createElement("span",{className:"b"},"\xa1Atenci\xf3n!")," El usuario ha incluido nuevas etiquetas. Val\xeddalas con un click y cuando apruebes el libro se incluir\xe1n en la selecci\xf3n de tags."),r.a.createElement(Q,{tags:Object(M.a)(j)})),r.a.createElement("button",{className:"btn-line",onClick:function(){return function(e,t){console.log(e,t),u({variables:{id:e}}).then((function(n){t&&t.forEach((function(e){h({variables:{id:e.id}}).then((function(e){return console.log(e)}))})),a.push("/confirmacion/borrado/".concat(e))}))}(k.id,j)}},"Borrar todo"),r.a.createElement("button",{className:"btn",onClick:function(){return function(e,n){var r=n.filter((function(e){return!0===e.isChecked})).map((function(e){return e.id})),o=n.filter((function(e){return!0!==e.isChecked})).map((function(e){return e.id}));r.length&&r.forEach((function(e){l({variables:{id:e}}).then((function(e){return console.log(e)}))})),o.length&&o.forEach((function(e){h({variables:{id:e}}).then((function(e){return console.log(e)}))})),c({variables:{id:t.params.bookId},refetchQueries:[{query:T},{query:q}]}).then((function(t){return a.push("/libro/".concat(e))}))}(k.id,j)}},"Aprobar este libro"),k.published&&r.a.createElement("p",{className:"b"},"Libro incluido en la estanter\xeda, \xa1gracias!")))}),Y=function(){return"Toda la informaci\xf3n de este libro se ha borrado con \xe9xito de la base de datos"};var H=Object(s.f)((function(e){var a=e.location,t=m.a.parse(a.search),c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],u=o[1];return r.a.createElement("main",null,"/"!==a.pathname&&r.a.createElement(W,null),r.a.createElement("section",{className:"section_1-2 section-fixed"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:V}),r.a.createElement(s.a,{path:"/recomendar-libro",component:R}),r.a.createElement(s.a,{path:"/gracias/:id",component:G}),r.a.createElement(s.a,{path:"/libro/:bookId",render:function(e){return r.a.createElement(K,e)}}),r.a.createElement(s.a,{path:"/buscar-libro",render:function(){return r.a.createElement(L,{handleTagSelection:function(e){return function(e){u(e)}(e)},queryTag:t.tag})}}),r.a.createElement(s.a,{path:"/approved/:bookId",render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(s.a,{path:"/confirmacion/:result/:bookId",render:function(e){return r.a.createElement(Y,e)}}))),r.a.createElement("section",{className:"section_1-2 section-fixed book-list-container ".concat("/"!==a.pathname?"header-layout":"")},r.a.createElement(P,Object.assign({selectedTags:l,queryTag:t.tag},a))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=t(10),Z=new g.a({uri:"https://books-x-people.herokuapp.com/graphql"});o.a.render(r.a.createElement(U.a,{client:Z},r.a.createElement(l.a,null,r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.6ee98301.chunk.js.map